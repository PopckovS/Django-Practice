Модуль `django-environ`
---
По сути можно работать с переменными окружения через модуль
`os.environ` но в `Django` есть специальный модуль `django-environ`
который делает работу проще.

В сущности это просто модуль который позволяет считывать переменные 
окружения, с которыми был запущен процесс, а далее просто делаем эти 
переменные окружения настройками для нашего проекта.

Установка

    pip3 install django-environ

Импорт 

    import environ

В файле настроек `settings.py` пропишем такой код:

```python
import environ
import os

# Создаем экземпляр для работы с переменными окружения
env = environ.Env()

# __file__ это параметр модуля, название самого файла
# os.path.abspath() - получим абсолютный путь к файлу
# os.path.dirname() - дважды поднимаясь на уровень выше
# попадаем в корень директории нашего проекта
BASE_DIR = os.path.dirname(
              os.path.dirname(
                  os.path.abspath(__file__)
              )
            )

# Помещаем файл .env с перечисленными переменными окружения в
# директорию venv c виртуальным окружением, который не комитится в
# репу. Считываем этот файл с настройками с помощью env.read_env()
# и таким образом получаем настройки дял проекта которые не 
# комитятся в репозиторий
path_to_env_file = os.path.join(BASE_DIR, 'venv' , '.env')
env.read_env(path_to_env_file)

# Далее через переменную env можем получать доступ к переменным
# окружения, и тем самым вносить их в наши константы для настройки
# проекта

DEBUG = env('DEBUG')
SECRET_KEY = env('SECRET_KEY')
DATABASES = {
    'default': env.db(),
    'extra': env.db_url(
        'SQLITE_URL',
        default='sqlite:////tmp/my-tmp-sqlite.db'
    )
}

CACHES = {
    'default': env.cache(),
    'redis': env.cache_url('REDIS_URL')
}
```

Таким файлом настроек, мы можем получать доступ к переменным 
окружения, которые лежат в директории с виртуальным окружением,
и которые не будут комититься в репозиторий.

---
`env.bool` `env.str`
---

В зависимости от типа настроек мы используем разные методы получения 
этих настроек, также можно задавать дефолтные значения если такое переменной 
окружения не найдено, по сути работает так же как и метод `get` словарей. 

Конвертация переменной окружения в тип `True/False`
```python
env.bool('DEBUG', default=False)
```

Конвертация переменной окружения в тип `str`
```python
env.str('MEDIA_URL', default='media/')
```

Конвертация переменной окружения в тип `int`
```python
env.int('NUMBER', default=10)
```

---
Простой пример настройки
---

Пример установки переменных окружения в обычные настройки проекта, в настройках 
`settings.py` есть специальная константа `BASE_DIR` которая ведет абсолютным
путем прямо до корня проекта, ее можно удобно использовать что бы создать путь 
до файла с переменными окружения `.env`

```python
import os
import environ

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

# Настройки виртуального окружения
env = environ.Env()

# путь к файлу с переменными окружения
env_file = os.path.join(str(BASE_DIR), '.env')

# считываем переменные окружения из файла
env.read_env(env_file)

VAR_1 = env.str('VAR_1', 'VAR_1')
VAR_2 = env.str('VAR_2', 'VAR_2')
VAR_3 = env.str('VAR_3', 'VAR_3')
```

---
Переменные окружения как список `env.list`
---

`ALLOWED_HOSTS` - список с доменами от которых разрешено 
обрабатывать запросы на сервере, является списком, для создания 
списка из переменных окружения есть специальный метод `list`

Обычно переменные окружения как список указываются через `:` но 
модуль `Django` парсит их через запятую, указывайте так.
```
ALLOWED_HOSTS=127.0.0.1,0.0.0.0,lovalhost
```

Настройки
```python
ALLOWED_HOSTS = env.list('DJANGO_ALLOWED_HOSTS', default=[])
```

---
Переменные окружения для БД `env.db_url`
---

Переменные окружения для настройки БД можно указывать как `URL`
следующим образом

    # Указывать требуется именно с таким названием
    DATABASE_URL=postgres://postgres:123@127.0.0.1:5432/django_test_1

У модуля `environ` ть спеуиальный метод `db_url()` который парсит
`DATABASE_URL` и конвертирует его в стандартный словарь настроек, 
но требуется что бы название переменной окружения было именно с таким
именем `DATABASE_URL`

```python
DATABASES = {
    'default': env.db_url()
}
```

---
Переменные окружения для путей к статическим файлам `env.path`
---

```python
STATIC_ROOT = env.path('DJANGO_STATIC_ROOT', default=ROOT_DIR.path('static').root)
```
